<!--html-->
<html>
    <head>
        <title>Q View</title>
        <link rel="stylesheet" type="text/css" href="style.css">

        <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
        <script src="https://unpkg.com/moralis/dist/moralis.js"></script>
    </head>

    <body>

        <button onclick="login()">Login with MetaMask</button>
        
        <script>
            // Moralis.initialize("BAwvbMiToQr1JICUrf4Tm2b4y6IJInP2DpWLGXMa");
            // Moralis.serverURL = "https://xfwseoyfgpul.usemoralis.com:2053/server";

            // async function login() {
            //     console.log("Login Clicked")
            //     var user = await Moralis.Web3.authenticate();
            //     if(user) {
            //         console.log(user)
            //     }
            // }

            const serverUrl = "https://xfwseoyfgpul.usemoralis.com:2053/server";
            const appId = "BAwvbMiToQr1JICUrf4Tm2b4y6IJInP2DpWLGXMa";
            Moralis.start({ serverUrl, appId });

            /** Add from here down */
            async function login() {
              let user = Moralis.User.current();
              if (!user) {
               try {
                  user = await Moralis.authenticate({ signingMessage: "Q Dapp!" })
                  console.log(user)
                  console.log(user.get('ethAddress'))
               } catch(error) {
                 console.log(error)
              }
             }
            }

            async function logOut() {
              await Moralis.User.logOut();
              console.log("logged out");
            }

            document.getElementById("btn-login").onclick = login;
            document.getElementById("btn-logout").onclick = logOut;    

        </script>
    </body>
    
</html>
